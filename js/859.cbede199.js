"use strict";(self["webpackChunkdnd5club_spa"]=self["webpackChunkdnd5club_spa"]||[]).push([[859],{8847:function(t,e,s){s.d(e,{Z:function(){return w}});var n=s(9199);const a={class:"section-header"},o={class:"section-header__body"},i={class:"section-header__title"},l={class:"section-header__title--text"},c={key:0,class:"section-header__subtitle"},r={key:0,class:"section-header__controls"},d={key:0,class:"section-header__controls--optional"},u={key:1,type:"button",class:"section-header__control--optional is-only-desktop"},p={key:1,class:"section-header__controls--main"};function h(t,e,s,h,_,y){const b=(0,n.up)("svg-icon");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",o,[(0,n._)("div",i,[(0,n._)("div",l,(0,n.zw)(s.title),1),s.copy?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"section-header__title--copy",onClick:e[0]||(e[0]=(0,n.iM)(((...t)=>y.copyText&&y.copyText(...t)),["left","exact","prevent","stop"]))},[(0,n.Wm)(b,{"icon-name":"copy"})])):(0,n.kq)("",!0)]),s.subtitle?((0,n.wg)(),(0,n.iD)("div",c,(0,n.zw)(s.subtitle),1)):(0,n.kq)("",!0)]),y.hasControls?((0,n.wg)(),(0,n.iD)("div",r,[y.hasOptionalControls?((0,n.wg)(),(0,n.iD)("div",d,[s.print?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"section-header__control--optional is-only-desktop",onClick:e[1]||(e[1]=(0,n.iM)(((...t)=>y.openPrintWindow&&y.openPrintWindow(...t)),["left","exact","prevent","stop"]))},[(0,n.Wm)(b,{"icon-name":"print"})])):(0,n.kq)("",!0),s.exportFoundry?((0,n.wg)(),(0,n.iD)("button",u,[(0,n.Wm)(b,{"icon-name":"export-foundry"})])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),y.hasMainControls?((0,n.wg)(),(0,n.iD)("div",p,[s.fullscreen?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"section-header__control--main is-only-desktop",onClick:e[2]||(e[2]=(0,n.iM)((e=>t.uiStore.setFullscreenState(!t.uiStore.getContentConfig.fullscreen)),["left","exact","prevent"]))},[(0,n.Wm)(b,{"icon-name":t.uiStore.getContentConfig.fullscreen?"exit-fullscreen":"fullscreen"},null,8,["icon-name"])])):(0,n.kq)("",!0),s.close?((0,n.wg)(),(0,n.iD)("button",{key:1,type:"button",class:"section-header__control--main",onClick:e[3]||(e[3]=(0,n.iM)((t=>s.close()),["left","exact","prevent","stop"]))},[(0,n.Wm)(b,{"icon-name":"close"})])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])}var _=s(5537),y=s(5669),b={name:"SectionHeader",components:{SvgIcon:_.Z},props:{title:{type:String,required:!0},subtitle:{type:String,default:""},copy:{type:String,default:""},print:{type:Boolean,default:!1},exportFoundry:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},close:{type:Function,default:void 0}},data:()=>({uiStore:(0,y.H)()}),computed:{hasOptionalControls(){return!!this.print||!!this.exportFoundry},hasMainControls(){return!!this.close||!!this.fullscreen},hasControls(){return!!this.hasOptionalControls||!!this.hasMainControls}},methods:{async copyText(){if(navigator.clipboard)try{return void await navigator.clipboard.writeText(this.copy)}catch(e){console.error(e)}const t=document.body.appendChild(document.createElement("input"));t.value=this.copy,t.focus(),t.select(),document.execCommand("copy"),t.parentNode.removeChild(t)},openPrintWindow(){window.print()}}},m=s(89);const g=(0,m.Z)(b,[["render",h],["__scopeId","data-v-187985b8"]]);var w=g},5859:function(t,e,s){s.r(e),s.d(e,{default:function(){return x}});var n=s(9199);const a={key:0,class:"class-detail"},o={key:0,class:"class-detail__tabs"},i=["onClick"],l={class:"class-detail__tab_icon"},c={class:"class-detail__tab_name"},r={key:1,class:"class-detail__body"},d={ref:"classBody",class:"class-detail__body--inner"},u=["innerHTML"],p={key:1,class:"class-detail__images"},h=["src","alt"],_={class:"class-detail"},y={class:"class-detail__loader"},b={class:"class-detail__loader_img"},m=["src"];function g(t,e,g,w,k,v){const f=(0,n.up)("section-header"),C=(0,n.up)("svg-icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[!t.loading&&v.currentClass?((0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(f,{title:v.currentClass.name.rus,subtitle:v.currentClass.name.eng,copy:v.urlForCopy,close:v.closeClass,fullscreen:""},null,8,["title","subtitle","copy","close"]),t.tabs.length?((0,n.wg)(),(0,n.iD)("div",o,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.tabs,((e,s)=>((0,n.wg)(),(0,n.iD)("button",{key:s,class:(0,n.C_)(["class-detail__tab",{"is-active":t.currentTab.name===e.name}]),onClick:(0,n.iM)((t=>v.setTab(s)),["left","exact","prevent"])},[(0,n._)("span",l,[(0,n.Wm)(C,{"icon-name":e.icon},null,8,["icon-name"])]),(0,n._)("span",c,(0,n.zw)(e.name),1)],10,i)))),128))])):(0,n.kq)("",!0),t.currentTab?.content?((0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",d,[t.currentTab.raw?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"class-detail__raw",innerHTML:t.currentTab.content},null,8,u)):"Изображения"===t.currentTab.name?((0,n.wg)(),(0,n.iD)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.currentTab.content,((t,e)=>((0,n.wg)(),(0,n.iD)("img",{key:e,src:t,alt:v.currentClass.name.rus,class:"class-detail__images_item"},null,8,h)))),128))])):(0,n.kq)("",!0)],512)])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("div",_,[(0,n._)("div",y,[(0,n._)("div",b,[(0,n._)("img",{src:s(594),alt:""},null,8,m)])])],512),[[n.F8,t.loading]])],64)}var w=s(1351),k=s(8847),v=s(5537),f=s(6318),C={name:"ClassDetail",components:{SvgIcon:v.Z,SectionHeader:k.Z},beforeRouteUpdate(t,e,s){this.loading=!0;const n=(0,w.q)();n.deselectClass(),n.setClassInfo(t.params.className,t.params?.classArchetype).then((async()=>{this.loading=!1,await this.setTab(0),s()})).catch((t=>{console.log(t)}))},data:()=>({http:new f.Z,classesStore:(0,w.q)(),loading:!0,currentTab:void 0,tabs:[]}),computed:{urlForCopy(){return window.location.origin+this.$route.fullPath},currentClass(){return this.classesStore.getCurrentClass}},async beforeMount(){this.tabs=this.currentClass.tabs.map((t=>({...t,content:t.content||void 0}))),await this.setTab(0),this.loading=!1},methods:{closeClass(){this.$router.push({name:"classes"})},async setTab(t){try{const e=this.tabs[t];if(!e.content){let t;if(t=e.raw?await this.http.rawGet(e.url):await this.http.get(e.url),200!==t.status)return void console.error(t.statusText);e.content=t.data}this.currentTab=e,this.$nextTick((()=>{this.$refs.classBody&&this.$refs.classBody.scrollIntoView({block:"start"})}))}catch(e){console.error(e)}},updateGrid(){this.$nextTick((()=>this.$redrawVueMasonry("classes-detail-images")))}}},D=s(89);const T=(0,D.Z)(C,[["render",g],["__scopeId","data-v-7a4169a7"]]);var x=T},594:function(t,e,s){t.exports=s.p+"img/loader.79102b2b.png"}}]);